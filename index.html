<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Logged</title>
</head>
<body>
  <h1>You Have Been Logged</h1>

  <script>
  (async () => {
    const ipData = await fetch('https://ipapi.co/json/').then(res => res.json());

    const visitorData = {
      ip: ipData.ip || "Unknown",
      city: ipData.city || "Unknown",
      region: ipData.region || "Unknown",
      country: ipData.country_name || "Unknown",
      org: ipData.org || "Unknown",
      userAgent: navigator.userAgent,
      language: navigator.language,
      screenSize: `${screen.width}x${screen.height}`,
      url: location.href,
      platform: navigator.platform,
      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
      localTime: new Date().toString(),
    };

    await fetch("/api/log", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(visitorData),
    });
  })();
  </script>
</body>
</html>
